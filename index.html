<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>🌍 Ultimate Country Simulator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: #1a1a2e;
      color: #e6e6e6;
      min-height: 100vh;
      padding: 20px;
    }

    .game-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 20px;
    }

    .sidebar {
      background: #16213e;
      padding: 20px;
      border-radius: 15px;
      height: fit-content;
    }

    .main-panel {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 20px;
    }

    .header {
      background: #0f3460;
      padding: 20px;
      border-radius: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .stat-box {
      background: #16213e;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #e94560;
    }

    .event-log {
      background: #16213e;
      padding: 20px;
      border-radius: 15px;
      height: 200px;
      overflow-y: auto;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .event-item {
      padding: 8px 0;
      border-bottom: 1px solid #2a2a4a;
    }

    .event-item.negative { color: #ff6b6b; }
    .event-item.positive { color: #50fa7b; }
    .event-item.neutral { color: #ffd700; }

    .decisions {
      background: #0f3460;
      padding: 20px;
      border-radius: 15px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .decision-card {
      background: #16213e;
      padding: 15px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .decision-card:hover {
      transform: translateY(-5px);
      border-color: #533483;
    }

    .decision-card h4 {
      margin-bottom: 10px;
      color: #533483;
    }

    .decision-cost {
      font-size: 0.9rem;
      color: #ff6b6b;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-btn {
      background: #16213e;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      color: #e6e6e6;
    }

    .tab-btn.active {
      background: #533483;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    button {
      background: #e94560;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin: 5px;
    }

    button:hover {
      background: #ff6b6b;
    }

    .chart-container {
      height: 200px;
      background: #16213e;
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .game-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="sidebar">
      <h2>Cumhurbaşkanı</h2>
      <div class="stat-box">
        <div>Gün</div>
        <div class="stat-value" id="day">1</div>
      </div>
      <div class="stat-box">
        <div>Para</div>
        <div class="stat-value" id="money">$<span id="money-val">1000</span>M</div>
      </div>
      <div class="stat-box">
        <div>Kamuoyu</div>
        <div class="stat-value" id="approval">65%</div>
      </div>
      <div class="stat-box">
        <div>İstikrar</div>
        <div class="stat-value" id="stability">80%</div>
      </div>

      <div class="tabs">
        <button class="tab-btn active" data-tab="economy">Ekonomi</button>
        <button class="tab-btn" data-tab="politics">Siyaset</button>
        <button class="tab-btn" data-tab="foreign">Dış Politika</button>
      </div>

      <div id="economy-tab" class="tab-content active">
        <h3>📉 Ekonomi</h3>
        <p>Enflasyon: <span id="inflation">5%</span></p>
        <p>İşsizlik: <span id="unemployment">8%</span></p>
        <p>Büyüme: <span id="growth">2%</span></p>
        <p>Borç: <span id="debt">$<span>500</span>M</span></p>
      </div>

      <div id="politics-tab" class="tab-content">
        <h3>🏛️ Siyaset</h3>
        <p>Meclis Desteği: <span id="parliament">55%</span></p>
        <p>Basın Özgürlüğü: <span id="press">70%</span></p>
        <p>Seçim Sayısı: <span id="elections">0</span></p>
      </div>

      <div id="foreign-tab" class="tab-content">
        <h3>🌐 Dış Politika</h3>
        <p>AB İlişkileri: <span id="eu">40%</span></p>
        <p>ABD İlişkileri: <span id="usa">60%</span></p>
        <p>Rusya İlişkileri: <span id="russia">50%</span></p>
        <p>Göçmenler: <span id="refugees">100K</span></p>
      </div>

      <button id="nextDay">⏭️ Sonraki Gün</button>
      <button id="saveGame">💾 Kaydet</button>
      <button id="loadGame">📂 Yükle</button>
    </div>

    <div class="main-panel">
      <div class="header">
        <h1>TÜRKİYE — ULTIMATE COUNTRY SIMULATOR</h1>
        <div>
          <button id="startElection">🗳️ Seçim Başlat</button>
          <button id="emergency">🚨 Olağanüstü Hal</button>
        </div>
      </div>

      <div class="event-log" id="eventLog">
        <div class="event-item neutral">Cumhurbaşkanı olarak göreve başladınız. Ülke 100 milyon nüfuslu, orta gelirli bir ülkede.</div>
        <div class="event-item positive">Merkez Bankası, enflasyonu kontrol altına aldı.</div>
        <div class="event-item negative">Tarım sektöründe kuraklık başladı.</div>
      </div>

      <div class="decisions" id="decisions">
        <!-- JS ile doldurulacak -->
      </div>
    </div>
  </div>

  <script>
    // Game State
    let gameState = {
      day: 1,
      money: 1000, // Milyon $
      approval: 65,
      stability: 80,
      inflation: 5,
      unemployment: 8,
      growth: 2,
      debt: 500,
      parliament: 55,
      press: 70,
      elections: 0,
      eu: 40,
      usa: 60,
      russia: 50,
      refugees: 100,
      policies: [],
      events: [],
      crisisLevel: 0,
      coupRisk: 0,
      lastElectionDay: 0,
      ministers: {
        economy: "Ahmet Yılmaz",
        foreign: "Ayşe Kaya",
        interior: "Mehmet Demir"
      }
    };

    // DOM Elements
    const dayEl = document.getElementById('day');
    const moneyEl = document.getElementById('money-val');
    const approvalEl = document.getElementById('approval');
    const stabilityEl = document.getElementById('stability');
    const inflationEl = document.getElementById('inflation');
    const unemploymentEl = document.getElementById('unemployment');
    const growthEl = document.getElementById('growth');
    const debtEl = document.getElementById('debt').querySelector('span');
    const parliamentEl = document.getElementById('parliament');
    const pressEl = document.getElementById('press');
    const electionsEl = document.getElementById('elections');
    const euEl = document.getElementById('eu');
    const usaEl = document.getElementById('usa');
    const russiaEl = document.getElementById('russia');
    const refugeesEl = document.getElementById('refugees');
    const eventLog = document.getElementById('eventLog');
    const decisionsContainer = document.getElementById('decisions');
    const nextDayBtn = document.getElementById('nextDay');
    const saveGameBtn = document.getElementById('saveGame');
    const loadGameBtn = document.getElementById('loadGame');
    const startElectionBtn = document.getElementById('startElection');
    const emergencyBtn = document.getElementById('emergency');

    // Tab System
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        this.classList.add('active');
        document.getElementById(this.dataset.tab + '-tab').classList.add('active');
      });
    });

    // Decision Cards (Politikalar)
    const policyDeck = [
      {
        title: "Vergi İndirimi",
        desc: "Tüketici harcamalarını artırır ama bütçe açığı yaratır.",
        cost: "Bütçe -100M, Borç +100M",
        effect: () => {
          gameState.money -= 100;
          gameState.debt += 100;
          gameState.approval = Math.min(100, gameState.approval + 5);
          gameState.growth += 1;
          logEvent("Cumhurbaşkanlığı, tüketici vergilerini düşürdü. Halk memnun, bütçe daraldı.", "positive");
        }
      },
      {
        title: "Kamu Personeli Alımı",
        desc: "İşsizliği azaltır ama maliyetli.",
        cost: "Bütçe -150M",
        effect: () => {
          gameState.money -= 150;
          gameState.unemployment = Math.max(0, gameState.unemployment - 2);
          gameState.approval = Math.min(100, gameState.approval + 7);
          logEvent("10.000 yeni kamu görevlisi atandı. İşsizlik düştü!", "positive");
        }
      },
      {
        title: "Yabancı Yatırımcı Çek",
        desc: "Ekonomiyi canlandırır ama bağımlılık yaratır.",
        cost: "ABD +10, Rusya -5",
        effect: () => {
          gameState.usa = Math.min(100, gameState.usa + 10);
          gameState.russia = Math.max(0, gameState.russia - 5);
          gameState.money += 200;
          gameState.growth += 2;
          logEvent("Yeni teknoloji yatırımı için ABD ile anlaşma yapıldı.", "positive");
        }
      },
      {
        title: "Basın Yasası",
        desc: "Muhalif sesleri bastırır ama kamuoyu düşer.",
        cost: "Basın Özgürlüğü -20",
        effect: () => {
          gameState.press = Math.max(0, gameState.press - 20);
          gameState.approval = Math.max(0, gameState.approval - 10);
          gameState.stability = Math.min(100, gameState.stability + 5);
          logEvent("Yeni basın yasası: 'Yalan haber' tanımı genişletildi.", "negative");
        }
      },
      {
        title: "Göçmen Geri Gönderme",
        desc: "Kısa vadede popüler ama diplomatik kriz.",
        cost: "AB -15, Rusya -10",
        effect: () => {
          gameState.eu = Math.max(0, gameState.eu - 15);
          gameState.russia = Math.max(0, gameState.russia - 10);
          gameState.refugees = Math.max(0, gameState.refugees - 30);
          gameState.approval = Math.min(100, gameState.approval + 8);
          logEvent("50.000 göçmen sınır dışı edildi. Halk alkışladı, AB kızdı.", "neutral");
        }
      },
      {
        title: "Enflasyonla Mücadele",
        desc: "Faizleri artır, para arzını kısıtla.",
        cost: "Büyüme -2, İşsizlik +3",
        effect: () => {
          gameState.inflation = Math.max(0, gameState.inflation - 3);
          gameState.growth = Math.max(-5, gameState.growth - 2);
          gameState.unemployment = Math.min(30, gameState.unemployment + 3);
          logEvent("Merkez Bankası faizleri %5 artırdı. Enflasyon düştü ama büyüme durdu.", "neutral");
        }
      },
      {
        title: "Askeri Darbe Önleme",
        desc: "Generallere rüşvet, istihbaratı güçlendir.",
        cost: "Bütçe -200M, İstikrar +15",
        effect: () => {
          gameState.money -= 200;
          gameState.stability = Math.min(100, gameState.stability + 15);
          gameState.coupRisk = Math.max(0, gameState.coupRisk - 30);
          logEvent("Askeri istihbarat birimi güçlendirildi. Darbe riski azaldı.", "positive");
        }
      },
      {
        title: "Yolsuzlukla Mücadele",
        desc: "Halkın güvenini artırır ama siyasi maliyeti yüksek.",
        cost: "Meclis Desteği -20",
        effect: () => {
          gameState.parliament = Math.max(0, gameState.parliament - 20);
          gameState.approval = Math.min(100, gameState.approval + 15);
          gameState.press = Math.min(100, gameState.press + 10);
          logEvent("Büyük yolsuzluk operasyonu! 5 bakan gözaltında.", "positive");
        }
      }
    ];

    // Random Events
    const randomEvents = [
      {
        condition: () => gameState.day % 7 === 0,
        trigger: () => {
          logEvent("Cumhurbaşkanı, halka doğrudan hitap etti: 'Güçlü Türkiye hedefindeyiz!'", "positive");
          gameState.approval = Math.min(100, gameState.approval + 3);
        }
      },
      {
        condition: () => gameState.inflation > 15,
        trigger: () => {
          logEvent("⚠️ ENFLASYON KRİZİ: Halk marketlerde fiyat etiketlerini takip ediyor!", "negative");
          gameState.approval = Math.max(0, gameState.approval - 5);
          gameState.stability = Math.max(0, gameState.stability - 5);
        }
      },
      {
        condition: () => gameState.unemployment > 15,
        trigger: () => {
          logEvent("⚠️ GENÇLER SOKAKTA: 'İş yok, umut yok' protestoları başladı.", "negative");
          gameState.approval = Math.max(0, gameState.approval - 7);
          gameState.stability = Math.max(0, gameState.stability - 10);
        }
      },
      {
        condition: () => gameState.press < 30,
        trigger: () => {
          logEvent("⚠️ MEDYA KRİZİ: 3 büyük gazete kapatıldı. Uluslararası tepkiler arttı.", "negative");
          gameState.usa = Math.max(0, gameState.usa - 10);
          gameState.eu = Math.max(0, gameState.eu - 15);
        }
      },
      {
        condition: () => gameState.coupRisk > 50,
        trigger: () => {
          logEvent("🚨 DARBE TEHDİDİ: Askeri birlikler başkente doğru hareket ediyor!", "negative");
          gameState.stability = Math.max(0, gameState.stability - 20);
          if (Math.random() < 0.3 && gameState.stability < 30) {
            alert("💥 DARBE BAŞARILI! Oyunu kaybettiniz.");
            resetGame();
          }
        }
      },
      {
        condition: () => gameState.day % 30 === 0 && gameState.elections < 3,
        trigger: () => {
          logEvent("🗳️ SEÇİM ZAMANI: Halk sandık başına gidiyor...", "neutral");
          setTimeout(() => holdElection(), 2000);
        }
      },
      {
        condition: () => Math.random() < 0.05,
        trigger: () => {
          const disasters = [
            "🌋 Ege’de volkanik aktivite! Turizm sektörü çöktü. -50M$",
            "🦠 SALGIN: Hastaneler doldu. Sağlık bütçesi +100M$",
            "💧 KURAKLIK: Tarım üretimi yarıya düştü. Gıda fiyatları +20%",
            "🛢️ ALTIN BULUNDU: Doğu Anadolu’da yeni maden! +300M$"
          ];
          const event = disasters[Math.floor(Math.random() * disasters.length)];
          logEvent(`🌍 RASTGELE OLAY: ${event}`, event.includes("ALTIN") ? "positive" : "negative");
          
          if (event.includes("ALTIN")) gameState.money += 300;
          if (event.includes("KURAKLIK")) gameState.inflation += 5;
          if (event.includes("SALGIN")) gameState.money -= 100;
          if (event.includes("volkanik")) gameState.money -= 50;
        }
      }
    ];

    // Functions
    function logEvent(text, type = "neutral") {
      const div = document.createElement('div');
      div.className = `event-item ${type}`;
      div.textContent = `Gün ${gameState.day}: ${text}`;
      eventLog.prepend(div);
      if (eventLog.children.length > 50) eventLog.removeChild(eventLog.lastChild);
    }

    function renderGame() {
      dayEl.textContent = gameState.day;
      moneyEl.textContent = gameState.money;
      approvalEl.textContent = `${gameState.approval}%`;
      stabilityEl.textContent = `${gameState.stability}%`;
      inflationEl.textContent = `${gameState.inflation}%`;
      unemploymentEl.textContent = `${gameState.unemployment}%`;
      growthEl.textContent = `${gameState.growth}%`;
      debtEl.textContent = gameState.debt;
      parliamentEl.textContent = `${gameState.parliament}%`;
      pressEl.textContent = `${gameState.press}%`;
      electionsEl.textContent = gameState.elections;
      euEl.textContent = `${gameState.eu}%`;
      usaEl.textContent = `${gameState.usa}%`;
      russiaEl.textContent = `${gameState.russia}%`;
      refugeesEl.textContent = `${gameState.refugees}K`;

      // Render decisions
      decisionsContainer.innerHTML = '';
      policyDeck.slice(0, 6).map(policy => {
        const card = document.createElement('div');
        card.className = 'decision-card';
        card.innerHTML = `
          <h4>${policy.title}</h4>
          <p>${policy.desc}</p>
          <p class="decision-cost">${policy.cost}</p>
        `;
        card.addEventListener('click', () => {
          if (gameState.money < 0 && policy.title.includes("Bütçe")) {
            alert("Cumhurbaşkanım, hazinede para yok!");
            return;
          }
          policy.effect();
          renderGame();
        });
        decisionsContainer.appendChild(card);
      });
    }

    function nextDay() {
      gameState.day++;

      // Daily auto-changes
      gameState.money += Math.floor(gameState.growth * 10); // GDP growth effect
      gameState.inflation += (Math.random() - 0.5) * 0.5; // Random inflation fluctuation
      gameState.inflation = Math.max(0, gameState.inflation);
      gameState.crisisLevel = Math.max(0, gameState.crisisLevel - 1);
      gameState.coupRisk = Math.max(0, gameState.coupRisk - 1);

      // Trigger random events
      randomEvents.forEach(event => {
        if (event.condition()) event.trigger();
      });

      // Auto crisis if approval < 30
      if (gameState.approval < 30) {
        gameState.coupRisk += 2;
        gameState.stability = Math.max(0, gameState.stability - 1);
      }

      renderGame();
    }

    function holdElection() {
      const baseChance = 40;
      const approvalBonus = gameState.approval * 0.6;
      const economyBonus = (10 - gameState.unemployment) * 2;
      const stabilityBonus = gameState.stability * 0.3;
      const totalChance = baseChance + approvalBonus + economyBonus + stabilityBonus;

      const won = Math.random() * 100 < totalChance;

      if (won) {
        gameState.elections++;
        gameState.approval = Math.min(100, gameState.approval + 10);
        logEvent(`🎉 SEÇİM ZAFERİ! ${gameState.elections}. kez cumhurbaşkanı seçildiniz.`, "positive");
      } else {
        logEvent("💀 SEÇİMİ KAYBETTİNİZ! Muhalefet iktidarı devraldı.", "negative");
        alert("Cumhurbaşkanlığı göreviniz sona erdi. Oyun bitti.");
        resetGame();
      }
    }

    function declareEmergency() {
      if (gameState.stability < 40) {
        alert("Cumhurbaşkanım, istikrar çok düşük. OHAL ilan edemezsiniz!");
        return;
      }
      gameState.stability = Math.min(100, gameState.stability + 20);
      gameState.press = Math.max(0, gameState.press - 30);
      gameState.approval = Math.max(0, gameState.approval - 15);
      logEvent("🚨 OLAĞANÜSTÜ HAL İLAN EDİLDİ! Basın sansürü, seyahat yasağı.", "negative");
      renderGame();
    }

    function saveGame() {
      localStorage.setItem('countrySim', JSON.stringify(gameState));
      alert("Cumhurbaşkanı, devletin durumu arşivlendi. 💾");
    }

    function loadGame() {
      const saved = localStorage.getItem('countrySim');
      if (saved) {
        gameState = JSON.parse(saved);
        alert("Cumhurbaşkanı, arşivden devam ediliyor. 📂");
        renderGame();
      } else {
        alert("Arşiv bulunamadı. Yeni bir cumhuriyet kurun!");
      }
    }

    function resetGame() {
      gameState = {
        day: 1, money: 1000, approval: 65, stability: 80, inflation: 5,
        unemployment: 8, growth: 2, debt: 500, parliament: 55, press: 70,
        elections: 0, eu: 40, usa: 60, russia: 50, refugees: 100,
        policies: [], events: [], crisisLevel: 0, coupRisk: 0, lastElectionDay: 0,
        ministers: { economy: "Ahmet Yılmaz", foreign: "Ayşe Kaya", interior: "Mehmet Demir" }
      };
      renderGame();
    }

    // Event Listeners
    nextDayBtn.addEventListener('click', nextDay);
    saveGameBtn.addEventListener('click', saveGame);
    loadGameBtn.addEventListener('click', loadGame);
    startElectionBtn.addEventListener('click', holdElection);
    emergencyBtn.addEventListener('click', declareEmergency);

    // Initialize
    renderGame();
  </script>
</body>
</html>

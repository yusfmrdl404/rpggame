<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üñºÔ∏è Liquid Glass Fotoƒüraf D√ºzenleyici</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #e0e7ff, #c7d2fe, #a5b4fc);
      min-height: 100vh;
      padding: 20px;
      background-attachment: fixed;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 30px;
    }

    .glass-panel {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(31, 41, 55, 0.1);
      padding: 24px;
      color: #1f2937;
    }

    .glass-panel h2, .glass-panel h3 {
      color: #1f2937;
      font-weight: 600;
    }

    .glass-panel h3 {
      margin: 24px 0 12px 0;
      padding-bottom: 8px;
      border-bottom: 2px solid rgba(255,255,255,0.5);
      font-size: 1.1rem;
    }

    .preview-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 500px;
    }

    .upload-area {
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      border: 2px dashed rgba(255, 255, 255, 0.6);
      border-radius: 18px;
      padding: 40px 20px;
      margin-bottom: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      color: #374151;
      font-weight: 500;
    }

    .upload-area:hover {
      background: rgba(255, 255, 255, 0.5);
      border-color: rgba(124, 58, 237, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(124, 58, 237, 0.1);
    }

    #preview {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      position: relative;
      display: none;
      border: 1px solid rgba(255,255,255,0.5);
    }

    /* Slider Stil */
    .slider-group {
      margin: 20px 0;
    }

    .slider-group label {
      display: block;
      margin-bottom: 8px;
      font-size: 0.95rem;
      color: #374151;
      font-weight: 500;
    }

    .slider-group input[type="range"] {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.5);
      border-radius: 10px;
      outline: none;
      -webkit-appearance: none;
      appearance: none;
      cursor: pointer;
    }

    .slider-group input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #8b5cf6;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(139, 92, 246, 0.3);
    }

    /* Buton Stil (Cam efekti) */
    .btn {
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      color: #4338ca;
      padding: 10px 16px;
      margin: 8px 4px;
      border-radius: 14px;
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: rgba(255, 255, 255, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.15);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn.active {
      background: rgba(139, 92, 246, 0.2);
      border-color: #8b5cf6;
      color: #5b21b6;
      box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
    }

    /* Filtre Grid */
    .filter-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }

    /* Text Input */
    .text-input {
      width: 100%;
      padding: 12px 16px;
      margin: 12px 0;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.5);
      background: rgba(255,255,255,0.6);
      color: #1f2937;
      font-weight: 500;
      font-size: 0.95rem;
      backdrop-filter: blur(8px);
    }

    .text-input:focus {
      outline: none;
      border-color: #8b5cf6;
      box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
    }

    .color-picker {
      width: 100%;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.5);
      background: rgba(255,255,255,0.6);
      cursor: pointer;
      margin: 12px 0;
    }

    /* Crop Area */
    .crop-area {
      position: absolute;
      border: 2px dashed #8b5cf6;
      border-radius: 8px;
      cursor: move;
      display: none;
      box-shadow: 0 0 0 9999px rgba(0,0,0,0.3);
      z-index: 10;
    }

    /* Text Element */
    #textElement {
      position: absolute;
      color: white;
      font-size: 30px;
      cursor: move;
      user-select: none;
      z-index: 10;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
      padding: 4px 8px;
      border-radius: 8px;
      background: rgba(0,0,0,0.3);
      pointer-events: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
      .glass-panel {
        padding: 16px;
      }
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .upload-area, .glass-panel {
      animation: fadeIn 0.6s ease-out;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="glass-panel">
      <h2>üé® Liquid Glass Edit√∂r</h2>

      <div class="controls">
        <h3>‚ú® Ayarlar</h3>
        <div class="slider-group">
          <label>Parlaklƒ±k</label>
          <input type="range" id="brightness" min="-100" max="100" value="0">
        </div>
        <div class="slider-group">
          <label>Kontrast</label>
          <input type="range" id="contrast" min="-100" max="100" value="0">
        </div>
        <div class="slider-group">
          <label>Doygunluk</label>
          <input type="range" id="saturation" min="-100" max="100" value="0">
        </div>

        <h3>üñºÔ∏è Filtreler</h3>
        <div class="filter-grid">
          <button class="btn active" data-filter="none">Normal</button>
          <button class="btn" data-filter="grayscale">Siyah-Beyaz</button>
          <button class="btn" data-filter="sepia">Sepya</button>
          <button class="btn" data-filter="vintage">Vintage</button>
          <button class="btn" data-filter="vhs">VHS</button>
          <button class="btn" data-filter="polaroid">Polaroid</button>
          <button class="btn" data-filter="lomo">Lomo</button>
          <button class="btn" data-filter="kodak">Kodak</button>
          <button class="btn" data-filter="fuji">Fuji</button>
          <button class="btn" data-filter="bw-high">B&W High</button>
        </div>

        <h3>‚úÇÔ∏è Kƒ±rp</h3>
        <button class="btn" id="startCrop">Kƒ±rpma Modu</button>
        <button class="btn" id="applyCrop">Uygula ‚úì</button>
        <button class="btn" id="cancelCrop">ƒ∞ptal ‚úï</button>

        <h3>üñãÔ∏è Metin</h3>
        <input type="text" class="text-input" id="textInput" placeholder="Metin yaz...">
        <input type="color" class="color-picker" id="textColor" value="#ffffff">
        <input type="range" id="textSize" min="12" max="80" value="30">
        <button class="btn" id="addText">Ekle</button>

        <h3>üîÑ D√∂nd√ºr</h3>
        <button class="btn" id="rotateLeft">‚ü≤</button>
        <button class="btn" id="rotateRight">‚ü≥</button>
        <button class="btn" id="flipH">‚Üî</button>
        <button class="btn" id="flipV">‚Üï</button>

        <h3>üíæ Dƒ±≈üa Aktar</h3>
        <button class="btn" id="downloadPng">PNG</button>
        <button class="btn" id="downloadJpg">JPG</button>
        <button class="btn" id="reset">Sƒ±fƒ±rla</button>
      </div>
    </div>

    <div class="glass-panel preview-area">
      <div class="upload-area" id="uploadArea">
        üì∑ Fotoƒürafƒ±nƒ± s√ºr√ºkle veya tƒ±kla
        <input type="file" id="fileInput" accept="image/*" style="display:none" />
      </div>
      <div id="previewContainer" style="position: relative; width: 100%; height: auto;">
        <img id="preview" />
        <div id="cropArea" class="crop-area"></div>
        <div id="textElement"></div>
      </div>
    </div>
  </div>

  <script>
    // ... (JavaScript kƒ±smƒ± aynƒ± kalƒ±yor ‚Äî UI deƒüi≈üti, mantƒ±k aynƒ±)
    // AYNI JS KODUNU KULLANIYORUZ ‚Äî SADECE CSS DEƒûƒ∞≈ûTƒ∞!
    // Yukarƒ±daki HTML'de JS kƒ±smƒ± eksik ‚Äî ≈üimdi tamamlayalƒ±m:
    
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');
    const previewContainer = document.getElementById('previewContainer');
    const cropArea = document.getElementById('cropArea');
    const textElement = document.getElementById('textElement');
    const brightnessSlider = document.getElementById('brightness');
    const contrastSlider = document.getElementById('contrast');
    const saturationSlider = document.getElementById('saturation');
    const filterBtns = document.querySelectorAll('.btn[data-filter]');
    const startCropBtn = document.getElementById('startCrop');
    const applyCropBtn = document.getElementById('applyCrop');
    const cancelCropBtn = document.getElementById('cancelCrop');
    const textInput = document.getElementById('textInput');
    const textColor = document.getElementById('textColor');
    const textSize = document.getElementById('textSize');
    const addTextBtn = document.getElementById('addText');
    const rotateLeftBtn = document.getElementById('rotateLeft');
    const rotateRightBtn = document.getElementById('rotateRight');
    const flipHBtn = document.getElementById('flipH');
    const flipVBtn = document.getElementById('flipV');
    const downloadPngBtn = document.getElementById('downloadPng');
    const downloadJpgBtn = document.getElementById('downloadJpg');
    const resetBtn = document.getElementById('reset');

    let currentFilter = 'none';
    let isCropping = false;
    let isDraggingText = false;
    let textOffsetX = 0, textOffsetY = 0;
    let rotation = 0;
    let flipH = false, flipV = false;

    uploadArea.addEventListener('click', () => fileInput.click());
    uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); });
    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      if (e.dataTransfer.files.length) {
        fileInput.files = e.dataTransfer.files;
        handleFile();
      }
    });

    fileInput.addEventListener('change', handleFile);

    function handleFile() {
      const file = fileInput.files[0];
      if (!file || !file.type.startsWith('image/')) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        preview.src = e.target.result;
        preview.style.display = 'block';
        resetTransforms();
      };
      reader.readAsDataURL(file);
    }

    function applyFilters() {
      let filter = '';
      const bright = brightnessSlider.value;
      const contrast = contrastSlider.value;
      const saturate = saturationSlider.value;

      if (bright != 0) filter += `brightness(${1 + bright/100}) `;
      if (contrast != 0) filter += `contrast(${1 + contrast/100}) `;
      if (saturate != 0) filter += `saturate(${1 + saturate/100}) `;

      switch(currentFilter) {
        case 'grayscale': filter += 'grayscale(1)'; break;
        case 'sepia': filter += 'sepia(1)'; break;
        case 'vintage': filter += 'sepia(0.3) contrast(1.1) saturate(1.2)'; break;
        case 'vhs': filter += 'saturate(0.7) contrast(1.1)'; break;
        case 'lomo': filter += 'contrast(1.3) saturate(1.5) sepia(0.2)'; break;
        case 'kodak': filter += 'brightness(1.1) contrast(1.05) saturate(1.2)'; break;
        case 'fuji': filter += 'saturate(1.3) contrast(1.1) hue-rotate(5deg)'; break;
        case 'bw-high': filter += 'grayscale(1) contrast(1.5)'; break;
      }

      preview.style.filter = filter;
    }

    [brightnessSlider, contrastSlider, saturationSlider].forEach(slider => {
      slider.addEventListener('input', applyFilters);
    });

    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        applyFilters();
      });
    });

    addTextBtn.addEventListener('click', () => {
      const text = textInput.value.trim();
      if (!text || !preview.src) return;

      textElement.textContent = text;
      textElement.style.color = textColor.value;
      textElement.style.fontSize = `${textSize.value}px`;
      textElement.style.display = 'block';
      textElement.style.left = '50%';
      textElement.style.top = '50%';
      textElement.style.transform = 'translate(-50%, -50%)';
      textElement.style.pointerEvents = 'auto';

      let isDragging = false, offsetX, offsetY;

      textElement.addEventListener('mousedown', (e) => {
        isDragging = true;
        const rect = textElement.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
        e.preventDefault();
      });

      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const containerRect = previewContainer.getBoundingClientRect();
        textElement.style.left = `${e.clientX - containerRect.left - offsetX}px`;
        textElement.style.top = `${e.clientY - containerRect.top - offsetY}px`;
        textElement.style.transform = 'none';
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
      });
    });

    rotateLeftBtn.addEventListener('click', () => { rotation = (rotation - 90) % 360; applyTransform(); });
    rotateRightBtn.addEventListener('click', () => { rotation = (rotation + 90) % 360; applyTransform(); });
    flipHBtn.addEventListener('click', () => { flipH = !flipH; applyTransform(); });
    flipVBtn.addEventListener('click', () => { flipV = !flipV; applyTransform(); });

    function applyTransform() {
      let transform = `rotate(${rotation}deg)`;
      if (flipH) transform += ' scaleX(-1)';
      if (flipV) transform += ' scaleY(-1)';
      preview.style.transform = transform;
    }

    startCropBtn.addEventListener('click', () => {
      if (!preview.src) return;
      isCropping = true;
      cropArea.style.display = 'block';
      cropArea.style.width = '200px';
      cropArea.style.height = '200px';
      cropArea.style.left = '50px';
      cropArea.style.top = '50px';

      let isDragging = false, offsetX, offsetY;

      cropArea.addEventListener('mousedown', (e) => {
        isDragging = true;
        const rect = cropArea.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
        e.preventDefault();
      });

      document.addEventListener('mousemove', (e) => {
        if (!isDragging || !isCropping) return;
        const containerRect = previewContainer.getBoundingClientRect();
        const left = Math.max(0, Math.min(preview.offsetWidth - cropArea.offsetWidth, e.clientX - containerRect.left - offsetX));
        const top = Math.max(0, Math.min(preview.offsetHeight - cropArea.offsetHeight, e.clientY - containerRect.top - offsetY));
        cropArea.style.left = `${left}px`;
        cropArea.style.top = `${top}px`;
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
      });
    });

    applyCropBtn.addEventListener('click', () => {
      if (!isCropping) return;
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const cropX = parseInt(cropArea.style.left);
      const cropY = parseInt(cropArea.style.top);
      const cropW = parseInt(cropArea.style.width);
      const cropH = parseInt(cropArea.style.height);

      canvas.width = cropW;
      canvas.height = cropH;
      ctx.drawImage(preview, cropX, cropY, cropW, cropH, 0, 0, cropW, cropH);
      preview.src = canvas.toDataURL('image/png');
      cropArea.style.display = 'none';
      isCropping = false;
    });

    cancelCropBtn.addEventListener('click', () => {
      cropArea.style.display = 'none';
      isCropping = false;
    });

    function downloadImage(format) {
      if (!preview.src) return;
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const img = new Image();
      img.src = preview.src;
      img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.save();
        ctx.translate(canvas.width/2, canvas.height/2);
        ctx.rotate(rotation * Math.PI / 180);
        if (flipH) ctx.scale(-1, 1);
        if (flipV) ctx.scale(1, -1);
        ctx.drawImage(img, -img.width/2, -img.height/2);
        ctx.restore();

        if (textElement.style.display !== 'none' && textElement.textContent) {
          ctx.font = `${textSize.value}px Arial`;
          ctx.fillStyle = textColor.value;
          ctx.fillText(textElement.textContent, parseFloat(textElement.style.left) || 50, parseFloat(textElement.style.top) || 50);
        }

        if (currentFilter === 'polaroid') {
          const border = 30;
          const final = document.createElement('canvas');
          const fctx = final.getContext('2d');
          final.width = canvas.width + border*2;
          final.height = canvas.height + border*2 + 40;
          fctx.fillStyle = 'white';
          fctx.fillRect(0,0,final.width,final.height);
          fctx.drawImage(canvas, border, border);
          fctx.fillStyle = '#333';
          fctx.font = '14px Arial';
          fctx.fillText(new Date().toLocaleDateString('tr-TR'), border+10, final.height-15);
          canvas.width = final.width; canvas.height = final.height;
          ctx.clearRect(0,0,canvas.width,canvas.height);
          ctx.drawImage(final,0,0);
        }

        const link = document.createElement('a');
        link.download = `edited.${format}`;
        link.href = canvas.toDataURL(`image/${format}`, 0.95);
        link.click();
      };
    }

    downloadPngBtn.addEventListener('click', () => downloadImage('png'));
    downloadJpgBtn.addEventListener('click', () => downloadImage('jpeg'));

    resetBtn.addEventListener('click', () => {
      brightnessSlider.value = contrastSlider.value = saturationSlider.value = 0;
      currentFilter = 'none'; rotation = 0; flipH = flipV = false;
      textElement.style.display = 'none'; cropArea.style.display = 'none'; isCropping = false;
      filterBtns.forEach(b => b.classList.remove('active'));
      filterBtns[0].classList.add('active');
      applyFilters(); applyTransform();
    });
  </script>
</body>
</html>

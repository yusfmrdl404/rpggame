<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>2.5D Mini Minecraft</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #87CEEB;
      font-family: Arial, sans-serif;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 70%, #D2B48C 100%);
    }

    .block {
      position: absolute;
      width: 50px;
      height: 50px;
      background-size: cover;
      box-shadow: inset -5px -5px 10px rgba(0,0,0,0.3);
      transition: transform 0.1s;
      cursor: pointer;
    }

    .player {
      position: absolute;
      width: 40px;
      height: 80px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="80" viewBox="0 0 40 80"><rect x="10" y="0" width="20" height="20" fill="%23FF0000"/><rect x="5" y="20" width="30" height="30" fill="%23333"/><rect x="10" y="50" width="20" height="30" fill="%23000"/></svg>') no-repeat center;
      z-index: 100;
      transition: all 0.2s ease;
    }

    #ui {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 15px;
      border-radius: 10px;
      font-size: 14px;
      z-index: 200;
    }

    #inventory {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 10px;
      z-index: 200;
    }

    .inv-item {
      width: 40px;
      height: 40px;
      background-size: cover;
      border: 3px solid transparent;
      cursor: pointer;
    }

    .inv-item.selected {
      border-color: gold;
      box-shadow: 0 0 10px gold;
    }

    #instructions {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 15px;
      border-radius: 10px;
      font-size: 12px;
      max-width: 200px;
      z-index: 200;
    }
  </style>
</head>
<body>
  <div id="game">
    <div class="player" id="player"></div>
  </div>

  <div id="ui">
    <div>üìç X: <span id="posX">0</span> Y: <span id="posY">0</span></div>
    <div>üß± Se√ßili Blok: <span id="selectedBlock">Toprak</span></div>
    <button id="saveBtn">üíæ Kaydet</button>
    <button id="loadBtn">üìÇ Y√ºkle</button>
  </div>

  <div id="inventory">
    <!-- JS ile doldurulacak -->
  </div>

  <div id="instructions">
    <strong>üéÆ KONTROLLER:</strong><br>
    - WASD: Hareket<br>
    - FARE: Blok se√ß<br>
    - SOL TIK: Blok yerle≈ütir<br>
    - SAƒû TIK: Blok kƒ±r<br>
    - 1-4: Envanter deƒüi≈ütir
  </div>

  <script>
    // Basit 2.5D Mini Minecraft
    const game = document.getElementById('game');
    const player = document.getElementById('player');
    const posX = document.getElementById('posX');
    const posY = document.getElementById('posY');
    const selectedBlockEl = document.getElementById('selectedBlock');
    const inventoryEl = document.getElementById('inventory');

    // Oyun durumu
    let gameState = {
      playerX: 400,
      playerY: 300,
      blocks: [],
      inventory: [
        { type: 'dirt', name: 'Toprak', color: '#8B4513' },
        { type: 'grass', name: '√áim', color: '#567D46' },
        { type: 'stone', name: 'Ta≈ü', color: '#808080' },
        { type: 'wood', name: 'Tahta', color: '#8B4513' }
      ],
      selectedSlot: 0
    };

    // Texture generator (data URL ile)
    function generateTexture(color) {
      return `data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50'><rect width='50' height='50' fill='${color}'/><rect x='0' y='0' width='50' height='5' fill='rgba(0,0,0,0.2)'/><rect x='0' y='0' width='5' height='50' fill='rgba(0,0,0,0.2)'/></svg>`;
    }

    // Render player
    function renderPlayer() {
      player.style.left = gameState.playerX + 'px';
      player.style.top = gameState.playerY + 'px';
      posX.textContent = Math.floor(gameState.playerX / 50);
      posY.textContent = Math.floor(gameState.playerY / 50);
    }

    // Render blocks
    function renderBlocks() {
      // Mevcut bloklarƒ± temizle (performans i√ßin optimize edilebilir)
      document.querySelectorAll('.block').forEach(b => b.remove());

      gameState.blocks.forEach(block => {
        const el = document.createElement('div');
        el.className = 'block';
        el.style.left = block.x + 'px';
        el.style.top = block.y + 'px';
        el.style.backgroundImage = `url(${generateTexture(block.color)})`;
        el.dataset.id = block.id;

        // Blok etkile≈üimi
        el.addEventListener('click', (e) => {
          e.stopPropagation();
          if (e.button === 0) {
            // Sol tƒ±k: Yerle≈ütir (yeni blok)
            placeBlock(block.x, block.y - 50);
          } else if (e.button === 2) {
            // Saƒü tƒ±k: Kƒ±r
            removeBlock(block.id);
          }
        });

        el.addEventListener('contextmenu', (e) => e.preventDefault());

        game.appendChild(el);
      });
    }

    // Blok ekle
    function placeBlock(x, y) {
      const selected = gameState.inventory[gameState.selectedSlot];
      const id = Date.now() + Math.random();
      gameState.blocks.push({
        id,
        x,
        y,
        type: selected.type,
        color: selected.color
      });
      renderBlocks();
    }

    // Blok kaldƒ±r
    function removeBlock(id) {
      gameState.blocks = gameState.blocks.filter(b => b.id !== id);
      renderBlocks();
    }

    // Envanteri render et
    function renderInventory() {
      inventoryEl.innerHTML = '';
      gameState.inventory.forEach((item, index) => {
        const el = document.createElement('div');
        el.className = `inv-item ${index === gameState.selectedSlot ? 'selected' : ''}`;
        el.style.backgroundImage = `url(${generateTexture(item.color)})`;
        el.dataset.slot = index;
        el.addEventListener('click', () => {
          gameState.selectedSlot = index;
          selectedBlockEl.textContent = item.name;
          renderInventory();
        });
        inventoryEl.appendChild(el);
      });
    }

    // Hareket
    document.addEventListener('keydown', (e) => {
      const speed = 10;
      switch(e.key.toLowerCase()) {
        case 'w': gameState.playerY = Math.max(0, gameState.playerY - speed); break;
        case 's': gameState.playerY += speed; break;
        case 'a': gameState.playerX = Math.max(0, gameState.playerX - speed); break;
        case 'd': gameState.playerX += speed; break;
        case '1': gameState.selectedSlot = 0; selectedBlockEl.textContent = gameState.inventory[0].name; renderInventory(); break;
        case '2': gameState.selectedSlot = 1; selectedBlockEl.textContent = gameState.inventory[1].name; renderInventory(); break;
        case '3': gameState.selectedSlot = 2; selectedBlockEl.textContent = gameState.inventory[2].name; renderInventory(); break;
        case '4': gameState.selectedSlot = 3; selectedBlockEl.textContent = gameState.inventory[3].name; renderInventory(); break;
      }
      renderPlayer();
    });

    // Fare ile blok ekleme (oyuncunun √∂n√ºnde)
    game.addEventListener('click', (e) => {
      if (e.target === game) {
        const rect = game.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // Oyuncuya en yakƒ±n 50px grid noktasƒ±na yerle≈ütir
        const gridX = Math.round((x - gameState.playerX) / 50) * 50 + gameState.playerX;
        const gridY = Math.round((y - gameState.playerY) / 50) * 50 + gameState.playerY;

        if (Math.abs(gridX - gameState.playerX) <= 100 && Math.abs(gridY - gameState.playerY) <= 100) {
          placeBlock(gridX, gridY);
        }
      }
    });

    // Saƒü tƒ±k engelle
    game.addEventListener('contextmenu', (e) => {
      if (e.target === game) {
        e.preventDefault();
        const rect = game.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // En yakƒ±n bloƒüu bul ve kaldƒ±r
        const closest = gameState.blocks.reduce((prev, curr) => {
          const prevDist = Math.hypot(prev.x - x, prev.y - y);
          const currDist = Math.hypot(curr.x - x, curr.y - y);
          return currDist < prevDist ? curr : prev;
        }, gameState.blocks[0] || null);

        if (closest && Math.hypot(closest.x - x, closest.y - y) < 60) {
          removeBlock(closest.id);
        }
      }
    });

    // Kaydet / Y√ºkle
    document.getElementById('saveBtn').addEventListener('click', () => {
      localStorage.setItem('miniMinecraft', JSON.stringify(gameState));
      alert('üåç D√ºnya kaydedildi!');
    });

    document.getElementById('loadBtn').addEventListener('click', () => {
      const saved = localStorage.getItem('miniMinecraft');
      if (saved) {
        gameState = JSON.parse(saved);
        renderPlayer();
        renderBlocks();
        renderInventory();
        alert('üåé D√ºnya y√ºklendi!');
      } else {
        alert('Kayƒ±tlƒ± d√ºnya bulunamadƒ±.');
      }
    });

    // Ba≈ülangƒ±√ß bloklarƒ±
    for (let i = -5; i <= 5; i++) {
      gameState.blocks.push({
        id: `ground-${i}`,
        x: 400 + i * 50,
        y: 400,
        type: 'grass',
        color: '#567D46'
      });
    }

    // Render initial state
    renderPlayer();
    renderBlocks();
    renderInventory();
  </script>
</body>
</html>
